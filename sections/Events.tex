\newpage
\section{Events}

Definition eines normalen Delegate:
\begin{lstlisting}[style=Csharp]
	public delegate void CountChangedHandler(CountChangedEventArgs e);
\end{lstlisting}

Definition einer Callback Arguments Klasse:
\begin{lstlisting}[style=Csharp]
 public class CountChangedEventArgs : EventArgs
 {
     private int mOldValue;
     private int mNewValue;

     public CountChangedEventArgs(int oldValue, int newValue)
     {
         mOldValue = oldValue;
         mNewValue = newValue;
     }

     public int OldValue
     {
         get { return mOldValue; }
     }

     public int NewValue
     {
         get { return mNewValue; }
     }
 }
\end{lstlisting}

Definition des Counters
\begin{lstlisting}[style=Csharp]
 class Counter
 {
     private int count;
     
     // Event vom Typ "CountChangedHandler" erstellen
     public event CountChangedHandler countChange;
     
     public int Count
     {
         set
         {
             CountChangedEventArgs e = new CountChangedEventArgs(count, value);
             countChange(e);
             count = value;
         }
         get { return count; }
     }

     public void Increment()
     {
         Count++;
     }

     public void Decrement()
     {
         Count--;
     }

     public void Reset()
     {
         Count = 0;
     }
 }
\end{lstlisting}

Hauptprogramm:
\begin{lstlisting}[style=Csharp]
 class Program
 {

     public static void CountChangeListener(CountChangedEventArgs e)
     {
         Console.WriteLine("Counter Value changed from {0} to {1}", e.OldValue, e.NewValue);
     }

     static void Main(string[] args)
     {

         Counter myCount = new Counter();
         myCount.countChange += CountChangeListener;

         myCount.Count = 5;

         myCount.Increment();
         myCount.Decrement();

         myCount.Reset();
     }
 }
\end{lstlisting}